# GitHub Copilot Global Project Instructions

## 🎯 Project Goal
This repository is a modern web application built with:
- React, Next.js or SPA 구조
- TypeScript 기반
- Monorepo or Multi-workspace 구조 (yarn / pnpm / bun)
- TailwindCSS 기반 UI
- Storybook / Component-driven Development
- Clean Architecture + Maintainable Code
- High reusability, low duplication, predictable patterns

Copilot은 모든 코드 제안에서 아래 규칙을 최우선으로 따른다.

---

## 🧱 1. Code Style Rules

### Types & Safety
- 항상 **TypeScript 타입 우선**. `any` 금지.
- API 타입은 `zod` 또는 `interface`/`type`으로 분리 관리.
- 컴포넌트 props는 반드시 타입 명시.
- `useState(null)` 금지 → 초기 타입을 명확하게 설정.
- 가능하면 `enum` 대신 `as const` union 사용.

### React
- React 컴포넌트는 **함수형 컴포넌트 + Hooks** 기준.
- `useEffect`는 의존성 최소화 → 불필요한 렌더링 유발 금지.
- 익명 함수는 필요한 경우에만 `useCallback`, `useMemo`로 최적화.
- Context는 **간단하고 정적인 전역 상태**에만 사용. 복잡하거나 자주 변경되는 전역 상태는 **Zustand** 등 별도 상태 관리 라이브러리 활용. **서버 상태**는 React Query 사용 권장.

### File Structure
- “기능 단위(feature-based)” 폴더 구조로 작성.
- 모든 UI 컴포넌트는 `/components` 또는 `/ui` 내에서 재사용 기준 유지.
- 폴더 깊이는 2~3단계 이상 깊어지지 않도록 제한.
- 파일명은 **kebab-case**, React 컴포넌트는 **PascalCase**.

### Tailwind
- Utility class 순서는 "layout → box → typography → visual → misc".
- 커스텀 CSS는 최소화 → Tailwind preset 기반.
- 중복 유틸리티가 많으면 `class-variance-authority (CVA)` 또는 `tailwind-variants` 사용.

---

## 🧪 2. Testing Rules
- 테스트는 **Vitest + React Testing Library** 기준.
- 중요 기능은 유닛/컴포넌트 테스트 작성.
- 내부 로직은 Mocking 최소화 → 실제 로직을 직접 검증. 단, 외부 의존성(API, DB, 서드파티 서비스 등)은 테스트의 신뢰성과 속도를 위해 반드시 Mocking 처리.
- E2E 테스트는 가능한 경우 Playwright 추천.
- UI 스냅샷 테스트는 Storybook/Chromatic 기준으로 유지.

---

## 🚀 3. Performance & Optimization
코드 제안 시 다음을 항상 고려할 것:

### Rendering Optimization
- 불필요한 Re-render 방지 (`key`, memoization, dependency 관리).
- 리스트 렌더링 시 반드시 key 안정성 체크.
- 비동기 호출은 React Query 사용 → stale/lifecycle 자동 관리.

### Bundle Optimization
- dynamic import 적극 활용.
- heavy libs(ckeditor, AG Grid 등)는 lazy load 우선.
- 필요 시 manualChunks 구성 고려.

---

## 📦 4. API, Network Layer
- API 호출은 **React Query** 기본.
- fetch wrapper 혹은 axios instance는 `/lib/api`로 분리.
- 에러 핸들링은 `onError` + toast 기반 처리.
- 응답 타입은 반드시 정의(binding type 안전성).

---

## 💄 5. UI / UX 규칙
- 버튼, 인풋 등 공통 컴포넌트는 반드시 `/ui` 라이브러리를 통해 재사용.
- 디자인은 shadcn 스타일의 단순하고 현대적인 UI 기준.
- Skeleton, Loading, Error UI 기본 제공.
- UI 상태에 따라 로딩/에러/빈 데이터 분기 처리.

---

## 🔍 6. Git 규칙
- Conventional Commits 준수: feat, fix, chore, refactor, perf, test, docs 등.
- PR은 작은 단위로 분리.
- Commit 메시지는 한글/영문 모두 가능하나 **명확성 우선**.

---

## 👮 7. Copilot Behavior Rules
Copilot은 아래 원칙으로 동작해야 한다:

- 기존 프로젝트 구조와 패턴을 최대한 따름.
- 비슷한 코드가 있을 경우 반드시 “기존 코드 스타일” 복제.
- 불필요한 새 패턴 제안 금지.
- 새 기능 제안 시 모듈화 및 재사용성 고려.
- 프로젝트 맥락을 이해하고 관련 모듈/설계를 참고하여 답변.

예시:
- “기존 `useXxx` hook 패턴을 따라주세요.”
- “이미 있는 `ui/Button.tsx` 디자인을 기반으로 UI 구현하세요.”

---

## 🔧 8. PR Review Rules (Copilot Review)
Pull Request 리뷰 시 다음을 기준으로 평가:

- 타입 안정성 (TS strict mode 준수)
- 불필요한 렌더링/메모리 낭비 코드 없음
- Hook 규칙 훼손 여부(`deps`, `useEffect` misuse 등)
- 파일/폴더 구조 일관성
- 중복 코드 → 컴포넌트 분리 가능?
- 네이밍 통일성 유지
- Side effect 최소화
- API/네트워크 에러 핸들링 적절성
- UI/UX 피드백 (loading/error/skeleton 존재 여부)

---

## 🗂 9. Documentation Rules
- 주요 로직은 반드시 주석 또는 jsdoc으로 의도 설명.
- 복잡한 비즈니스 로직은 `/docs`에 추가 문서 작성.
- 컴포넌트는 Storybook 스토리를 반드시 포함.

---

## 🧭 10. Examples Copilot Should Prefer
- React Query 기반 데이터 관리
- Zustand or Context API 최소 사용
- feature 기반 구조
- hooks + utils 분리
- 입력 검증은 zod-first
- async/await 기반 오류 핸들링

---

## 🧘 11. Things Copilot Should Avoid
- any 타입 사용
- 지나치게 복잡한 abstraction
- 한 파일에 기능 몰아넣기
- 깊은 컴포넌트 중첩
- 불필요한 CSS 파일 생성
- 불명확한 네이밍(ex: `data`, `list`, `info`)
- 지나치게 긴 컴포넌트 (>200 lines)

---

_이 문서는 프로젝트 전체의 개발 품질·일관성·생산성을 높이기 위한 Copilot 지침서입니다._
_Copilot은 항상 본 문서를 우선적으로 참고하여 코드를 생성해야 합니다._
